apiVersion: serving.knative.dev/v1alpha1
kind: Service
metadata:
  name: stock-experiment-example
  labels:
    app.kubernetes.io/name: stock-experiment-example
spec:
  template:
    metadata:
      name: stock-experiment-example-first
    spec:
      containers:
      - image: github.com/iter8-tools/iter8-controller/samples/stock
        env:
          - name: RESOURCE
            value: share
        readinessProbe:
          httpGet:
            path: /
          initialDelaySeconds: 0
          periodSeconds: 3
---
apiVersion: networking.istio.io/v1alpha3
kind: ServiceEntry
metadata:
  name: external-iex-https
  labels:
    app.kubernetes.io/name: stock-experiment-example
spec:
  hosts:
  - api.iextrading.com
  location: MESH_EXTERNAL
  ports:
  - number: 443
    name: https
    protocol: TLS
  resolution: DNS
